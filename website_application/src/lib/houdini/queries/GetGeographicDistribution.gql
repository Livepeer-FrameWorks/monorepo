# Fetch geographic viewer distribution with top countries and cities
# Returns aggregated viewer counts and percentages for geographic analytics
query GetGeographicDistribution(
  $stream: String
  $timeRange: TimeRangeInput
  $topN: Int = 10
) {
  geographicDistribution(stream: $stream, timeRange: $timeRange, topN: $topN) {
    timeRange {
      start
      end
    }
    stream
    topCountries {
      countryCode
      viewerCount
      percentage
    }
    topCities {
      city
      countryCode
      viewerCount
      percentage
      latitude
      longitude
    }
    uniqueCountries
    uniqueCities
    totalViewers
    viewersByCountry {
      timestamp
      countryCode
      viewerCount
    }
  }
}
