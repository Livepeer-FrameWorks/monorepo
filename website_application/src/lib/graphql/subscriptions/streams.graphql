# Stream real-time subscriptions

# Subscribe to stream lifecycle events
subscription StreamEvents($stream: String) {
  streamEvents(stream: $stream) {
    type
    stream
    status
    timestamp
    details
  }
}

# Subscribe to real-time viewer metrics for a specific stream
subscription ViewerMetricsStream($stream: String!) {
  viewerMetrics(stream: $stream) {
    stream
    currentViewers
    viewerCount
    peakViewers
    bandwidth
    connectionQuality
    bufferHealth
    timestamp
  }
}

# Subscribe to track list updates for a stream
subscription TrackListUpdates($stream: String!) {
  trackListUpdates(stream: $stream) {
    stream
    trackList
    trackCount
    timestamp
  }
}

# Subscribe to all events for current tenant (tenant determined from auth context)
subscription TenantEvents {
  userEvents {
    ... on StreamEvent {
      type
      stream
      status
      timestamp
      details
    }
    ... on ViewerMetrics {
      stream
      currentViewers
      viewerCount
      peakViewers
      bandwidth
      connectionQuality
      bufferHealth
      timestamp
    }
    ... on TrackListEvent {
      stream
      trackList
      trackCount
      timestamp
    }
  }
}