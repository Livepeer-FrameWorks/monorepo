# Stream real-time subscriptions

# Subscribe to stream lifecycle events
subscription StreamEvents($stream: String) {
  streamEvents(stream: $stream) {
    type
    stream
    status
    timestamp
    details
  }
}

# Subscribe to real-time viewer metrics for a specific stream
# NOTE: Schema now returns per-client metrics (ViewerMetrics), not aggregated stats.
# The previous fields (viewerCount, peakViewers) are not available here.
subscription ViewerMetricsStream($stream: String!) {
  viewerMetrics(stream: $stream) {
    internalName
    nodeId
    action
    protocol
    timestamp
    bandwidthInBps
    bandwidthOutBps
    clientCity
    clientCountry
  }
}

# Subscribe to track list updates for a stream
subscription TrackListUpdates($stream: String!) {
  trackListUpdates(stream: $stream) {
    streamName
    totalTracks
    videoTrackCount
    audioTrackCount
    tracks {
      trackName
      trackType
      codec
      bitrateKbps
      width
      height
      fps
      resolution
      channels
      sampleRate
    }
  }
}
