# Stream real-time subscriptions

# Subscribe to stream lifecycle events
subscription StreamEvents($streamId: ID) {
  streamEvents(streamId: $streamId) {
    type
    streamId
    status
    timestamp
    nodeId
    details
  }
}

# Subscribe to real-time viewer metrics for a specific stream
subscription ViewerMetricsStream($streamId: ID!) {
  viewerMetrics(streamId: $streamId) {
    streamId
    currentViewers
    peakViewers
    bandwidth
    connectionQuality
    bufferHealth
    timestamp
  }
}

# Subscribe to track list updates for a stream
subscription TrackListUpdates($streamId: ID!) {
  trackListUpdates(streamId: $streamId) {
    streamId
    trackList
    trackCount
    timestamp
  }
}

# Subscribe to all events for current tenant (tenant determined from auth context)
subscription TenantEvents {
  userEvents {
    ... on StreamEvent {
      type
      streamId
      status
      timestamp
      nodeId
      details
    }
    ... on ViewerMetrics {
      streamId
      currentViewers
      peakViewers
      bandwidth
      connectionQuality
      bufferHealth
      timestamp
    }
    ... on TrackListEvent {
      streamId
      trackList
      trackCount
      timestamp
    }
  }
}