# Analytics queries
query GetStreamAnalytics($stream: String!, $timeRange: TimeRangeInput) {
  streamAnalytics(stream: $stream, timeRange: $timeRange) {
    stream
    totalViews
    totalViewTime
    peakViewers
    averageViewers
    uniqueViewers
    timeRange {
      start
      end
    }
    # New health metrics
    currentHealthScore
    averageHealthScore
    frameJitterMs
    keyframeStabilityMs
    currentIssues
    bufferState
    packetLossPercentage
    qualityTier
    currentCodec
    currentResolution
    currentBitrate
    currentFps
    rebufferCount
    alertCount
  }
}

query GetViewerMetrics($stream: String, $timeRange: TimeRangeInput) {
  viewerMetrics(stream: $stream, timeRange: $timeRange) {
    timestamp
    viewerCount
  }
}

query GetPlatformOverview($timeRange: TimeRangeInput) {
  platformOverview(timeRange: $timeRange) {
    totalStreams
    totalViewers
    totalBandwidth
    totalUsers
    timeRange {
      start
      end
    }
  }
}

query GetUsageRecords($timeRange: TimeRangeInput) {
  usageRecords(timeRange: $timeRange) {
    id
    resourceType
    quantity
    unit
    cost
    timestamp
  }
}