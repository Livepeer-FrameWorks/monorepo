---
title: "Running Edge Nodes"
description: "Set up MistServer and Helmsman on your own hardware."
draft: true
sidebar:
  order: 2
---

An edge node is the workhorse of the FrameWorks network. It pairs the industrial-strength streaming capabilities of MistServer with our lightweight agent, Helmsman, to securely join your hardware to the global fleet.

## Get the CLI

The FrameWorks CLI handles most of the setup.

```bash
# Download
curl -L %GITHUB_URL%/releases/latest/download/frameworks -o frameworks
chmod +x frameworks
sudo mv frameworks /usr/local/bin/

# Verify
frameworks version
```

## Run Preflight Checks

Before installing anything, make sure your host is ready:

```bash
frameworks edge preflight --domain stream.yourdomain.com
```

This checks:
- Docker and Docker Compose installed
- Required ports available (80, 443, 1935, 8080)
- DNS resolves to this server
- Kernel parameters (sysctl) are sane
- `/dev/shm` is large enough
- File descriptor limits won't choke under load

If something fails, the output tells you how to fix it.

## Apply System Tuning

For production workloads, apply recommended kernel and limit settings:

```bash
# Preview what will change
frameworks edge tune

# Apply the changes (requires root)
sudo frameworks edge tune --write
```

This configures:
- TCP buffer sizes for streaming workloads
- File descriptor limits
- Memory-mapped file limits
- Network stack tuning

## Generate the Edge Stack

```bash
frameworks edge init --dir /opt/frameworks-edge \
  --domain stream.yourdomain.com \
  --email ops@yourdomain.com
```

This creates:
- `.edge.env` - Environment configuration
- `docker-compose.edge.yml` - Container definitions for MistServer, Helmsman, and Caddy
- `Caddyfile` - Reverse proxy with automatic HTTPS

The `--email` is for Let's Encrypt certificates.

## Review the Config

Before starting, check `.edge.env`:

```bash
# Node identity (assigned during enrollment)
HELMSMAN_CLUSTER_ID=your-cluster
HELMSMAN_NODE_ID=edge-node-1

# Where to send events
DECKLOG_HOST=decklog.frameworks.network
DECKLOG_PORT=18006

# Stream authentication
COMMODORE_URL=https://api.frameworks.network

# Capabilities (what this node can do)
HELMSMAN_CAP_INGEST=true
HELMSMAN_CAP_EDGE=true
HELMSMAN_CAP_STORAGE=true
```

Most defaults are fine. You'll fill in the cluster/node IDs after enrollment.

## Start the Stack

```bash
cd /opt/frameworks-edge
docker compose -f docker-compose.edge.yml up -d
```

Check status:
```bash
frameworks edge status
```

You should see:
- `mistserver` - Running
- `helmsman` - Running
- `caddy` - Running
- HTTPS - Valid certificate

## What's Running

### MistServer

The media server. Handles:
- RTMP/SRT/WHIP ingest
- HLS/DASH/WebRTC delivery
- Transcoding (if configured)
- Recording (if enabled)

Web UI: `https://stream.yourdomain.com:4242` (internal, not exposed by default)

### Helmsman

The sidecar. Does:
- Validates stream keys against Commodore
- Collects client and node metrics
- Batches events and sends to Decklog
- Reports node capacity to Foghorn

Health check: `curl http://localhost:18007/health`

### Caddy

Reverse proxy. Provides:
- Automatic HTTPS via Let's Encrypt
- Routes viewer traffic to MistServer
- Terminates TLS

## Logs

```bash
# All containers
frameworks edge logs

# Specific container (positional argument)
frameworks edge logs helmsman --follow

# Or use docker directly
docker compose -f docker-compose.edge.yml logs -f helmsman
```

## Common Issues

**"DNS does not resolve to this host"**

Your DNS record doesn't point to this server's public IP.

```bash
# Check what DNS returns
dig +short stream.yourdomain.com

# Compare to your public IP
curl ifconfig.me
```

**"Port 443 in use"**

Something else is running on 443 (probably Apache or Nginx).

```bash
# Find what's using it
sudo lsof -i :443

# Stop the conflicting service
sudo systemctl stop nginx
```

**"Certificate failed"**

Let's Encrypt rate limits or DNS not propagated yet.

```bash
# Check certificate status
frameworks edge cert

# Force reload after fixing
frameworks edge cert --reload
```

**"Helmsman can't reach Commodore"**

Network issue or firewall blocking outbound HTTPS.

```bash
# Test connectivity
curl -I %API_URL%/health
```

## Next Steps

Your edge node is running but not connected to the network yet. Next: [Connect to the network](/hybrid/connecting).
